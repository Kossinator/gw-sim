<template>
    <base-toast></base-toast>
    <p class="temp" lwc:dom="manual"></p>

    <div class="slds-grid">
        <div class="slds-col slds-size_1-of-3">
            <section class="slds-p-bottom--x-small">
                Account:<base-select class="slds-show_inline-block slds-m-horizontal--small"
                            value={cache.selectedAccount} options={savedAccounts} onchange={selectAccount}></base-select>
                <span class="slds-m-left--x-small">Start / Upload: {latestUpload}</span>
            </section>

            <lightning-accordion allow-multiple-sections-open active-section-name="Upload">
                <lightning-accordion-section label="Start Anpassen" name="Start" if:true={defaultSelected}>
                    <section class=" slds-p-bottom--x-small">
                        Uni:<base-select class="slds-show_inline-block slds-m-left--small"
                                        value={selectedUni} options={unis} onchange={setUni}></base-select>
                    </section>
                    <section class=" slds-p-bottom--x-small">
                        Start:<input class="date slds-input slds-m-left--small" value={date} type="date" />
                        <input class="time slds-input slds-m-left--small" value={time} type="time" step="1" />
                        <lightning-button variant="brand" onclick={changeTime} label="Anwenden" class="slds-m-left--small"></lightning-button>
                    </section>
                    <lightning-button variant="brand" onclick={resetTime} label="Zeit auf Uni Start setzen"></lightning-button>
                </lightning-accordion-section>
                <lightning-accordion-section label="Bauschleifen Anpassen" name="Bauschleifen">
                    <section class=" slds-p-bottom--x-small">
                        Planet:<base-select class="slds-show_inline-block slds-m-left--small"
                                        value={coords} options={planets} onchange={setPlanet}></base-select>
                        <b class="slds-m-left--medium">Rohstoffe: {queueCleanupRes.fe} / {queueCleanupRes.lut} / {queueCleanupRes.h2o} / {queueCleanupRes.h2}</b>
                    </section>
                    <section class=" slds-p-bottom--x-small">
                        <lightning-pill for:each={queueItems} for:item="type" key={type}
                                        onremove={cleanupQueue} label={type} class="slds-m-right--xxx-small"></lightning-pill>
                    </section>
                    <section class=" slds-p-bottom--x-small">
                        <lightning-button-group>
                            <lightning-button label="Speichern" variant="success" onclick={acceptQueueCleanup} disabled={queueUnchanged}></lightning-button>
                            <lightning-button label="Abbrechen" variant="destructive" onclick={abortQueueCleanup} disabled={queueUnchanged}></lightning-button>
                        </lightning-button-group>
                    </section>
                </lightning-accordion-section>
                <lightning-accordion-section label="Upload" name="Upload">
                    <section class="slds-p-bottom--x-small">
                        <a href="https://uni4.gigrawars.de/game_research_index/" target="_blank" class="slds-m-right--x-small">Forschung</a>
                        <a href="https://uni4.gigrawars.de/game_empire_index/" target="_blank" class="slds-m-right--x-small">Gesamtübersicht</a>
                        <a href="https://uni4.gigrawars.de/game_statistic_resource/" target="_blank" class="slds-m-right--x-small">Rohstoffe</a>
                        <a href="https://uni4.gigrawars.de/game_dashboard_index/" target="_blank" class="slds-m-right--x-small">Startseite</a>
                        <textarea placeholder="Forschung" name="research" onpaste={pasteDom} class="upload slds-theme_offline" rows="3" cols="40"></textarea>
                        <textarea placeholder="Gesamtübersicht" name="overviewDom" onpaste={pasteDom} class="upload slds-theme_offline" rows="3" cols="40"></textarea>
                        <textarea placeholder="Statistik -> Rohstoffe" name="stats" onpaste={pasteDom} class="upload slds-theme_offline" rows="3" cols="40"></textarea>
                        <textarea placeholder="Startseite" name="landingHtml" onpaste={pasteDom} class="upload slds-theme_offline" rows="3" cols="40"></textarea>

                        <lightning-button label="Hochladen" variant="success" onclick={upload}></lightning-button>
                    </section>
                </lightning-accordion-section>
            </lightning-accordion>

            <section class="slds-p-bottom--x-small">
                <lightning-button label="Alle Accountdaten Löschen" variant="destructive" onclick={clear} class="slds-m-right--small"></lightning-button>
                (Pfade sind hiervon nicht betroffen)
            </section>
        </div>
        <div class="slds-col slds-size_2-of-3 slds-p-horizontal--medium">
            <lightning-textarea variant="label-hidden" value={beautifiedJson} class="json"></lightning-textarea>
            <lightning-button label="Speichern" variant="success" onclick={uploadFullAccount}></lightning-button>
        </div>
    </div>
</template>